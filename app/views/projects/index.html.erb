<%= link_to "New Project", new_project_path %>


<div class="row center">
  <div class="col m12">
    <%= form_tag(projects_url, method: :get, id: "search-form") do %>
      <%= select_tag :category_id, options_for_select(Category.options_for_select, params[:category_id]) %>
      <%= submit_tag 'Search', name: nil, class: 'btn' %>
      <% if params[:category_id]%>
        <%= link_to 'Clear', root_url, class: 'btn' %>
      <% end %>
    <% end %>

    <% if params[:category_id] && @projects.empty? %>
      Sorry, no results for <%= Category.find(params[:category_id]).name %>
    <% end %>
  </div>
</div>

<% @projects.each do |project| %>
  <article class="project">
    <%= link_to project, class: 'project-link' do %>
      <figure class="project-image">
        <% if project.image %>
          <%= image_tag project.image %>
        <% else %>
          <%= image_tag ActionController::Base.helpers.asset_path("default.jpg") %>
        <% end %>
      </figure>
      <h1 class="project-title"><%= project.title %></h1>
      <time class="project-days-left">
        <%= icon('clock-o') %>
        <%= "#{time_ago_in_words(project.end_date)} #{( project.end_date > Time.now.utc ) ? 'remaining' : 'past deadline'}" %></time>
    <% end %>
  </article>
<% end %>
